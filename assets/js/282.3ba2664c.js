(window.webpackJsonp=window.webpackJsonp||[]).push([[282],{709:function(a,s,t){"use strict";t.r(s);var r=t(6),n=Object(r.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"出现情景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#出现情景"}},[a._v("#")]),a._v(" 出现情景")]),a._v(" "),s("p",[a._v("在百度地图开始收50000/年的授权费的情况下，公司所有产品线的地图服务转向高德地图(也是5000/年)。在项目中使用了高德地图的SDK，编译的时候出现了下面的错误")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" The "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Pods-Runner'")]),a._v(" target has frameworks with conflicting names: amapfoundationkit.framework.\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("h2",{attrs:{id:"出现原因"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#出现原因"}},[a._v("#")]),a._v(" 出现原因")]),a._v(" "),s("p",[a._v("这种问题通常发生在 Flutter 项目中使用了不同的地图 SDK，并且使用了类似 CocoaPods 的依赖管理工具管理项目依赖时。错误提示是由于存在冲突的 framework 名称导致无法构建项目。")]),a._v(" "),s("h2",{attrs:{id:"解决方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决方法"}},[a._v("#")]),a._v(" 解决方法")]),a._v(" "),s("h3",{attrs:{id:"方式一-去除掉一个地图sdk-并清除缓存-重新构建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方式一-去除掉一个地图sdk-并清除缓存-重新构建"}},[a._v("#")]),a._v(" 方式一.去除掉一个地图SDK，并清除缓存，重新构建")]),a._v(" "),s("p",[a._v("这种方式适用于项目中只使用了一个地图SDK的情况，比如项目中只使用了高德地图，那么就可以去除掉百度地图的SDK，然后清除缓存，重新构建项目。")]),a._v(" "),s("h3",{attrs:{id:"方式二-如果两个sdk用的是同一个framework-那么可以将framework的版本改为同一个"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方式二-如果两个sdk用的是同一个framework-那么可以将framework的版本改为同一个"}},[a._v("#")]),a._v(" 方式二.如果两个SDK用的是同一个framework，那么可以将framework的版本改为同一个")]),a._v(" "),s("p",[a._v("下面以flutter项目中amap_flutter_map和amap_search_fluttify中amapfoundationkit.framework冲突为例，介绍下具体的操作步骤。\n我们可以在amap_search_fluttify的podspec文件中进行如下修改")]),a._v(" "),s("div",{staticClass:"language-ruby line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ruby"}},[s("code",[a._v("s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("dependency "),s("span",{pre:!0,attrs:{class:"token string-literal"}},[s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'AMapFoundationKit'")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string-literal"}},[s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'~> 1.4.0'")])]),a._v("\n或者将AMapSearch改成和amap_flutter_map中的版本一致\n s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("dependency "),s("span",{pre:!0,attrs:{class:"token string-literal"}},[s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'AMapSearch'")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string-literal"}},[s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'9.3.1'")])]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("p",[a._v("重新构建项目。")]),a._v(" "),s("p",[a._v("这种方式适用于项目中只使用了一个地图SDK的情况，比如项目中只使用了高德地图，那么就可以去除掉百度地图的SDK，然后清除缓存，重新构建项目。")]),a._v(" "),s("h3",{attrs:{id:"方式三-修改冲突的framework名称-使两个冲突的framework断开链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方式三-修改冲突的framework名称-使两个冲突的framework断开链接"}},[a._v("#")]),a._v(" 方式三.修改冲突的framework名称,使两个冲突的framework断开链接")]),a._v(" "),s("p",[a._v("这种方式适用于项目中使用了多个地图SDK的情况，比如项目中同时使用了高德地图和百度地图，那么就需要修改其中一个地图SDK的framework名称，然后清除缓存，重新构建项目。")]),a._v(" "),s("p",[a._v("下面以修改高德地图的framework名称为例，介绍下具体的操作步骤。")]),a._v(" "),s("div",{staticClass:"language-ruby line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ruby"}},[s("code",[a._v("post_install "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("do")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("installer"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 修改AMapFoundationKit.framework的名称")]),a._v("\n  target_names "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token string-literal"}},[s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"AMapFoundationKit"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token string-literal"}},[s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"AMapLocation"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token string-literal"}},[s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"AMapNavi"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token string-literal"}},[s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"AMapSearch"')])]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n  installer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("pods_project"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("targets"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("each")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("do")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("target"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" target_names"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("include")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("?")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("build_configurations"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("each")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("do")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("config"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n            config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("build_settings"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string-literal"}},[s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'CURRENT_PROJECT_VERSION'")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string-literal"}},[s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'1'")])]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("end")]),a._v("\n        target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("path "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string-literal"}},[s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Frameworks"')])]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("end")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("end")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("end")]),a._v("\n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br")])]),s("p",[a._v("该脚本会将使用了target_names数组中的库的工程中的AMapFoundationKit.framework修改为AMapFoundationKit_1.framework，其他的 framework 也会进行相应的更改。")]),a._v(" "),s("p",[a._v("然后清除缓存，重新构建项目。")]),a._v(" "),s("h4",{attrs:{id:"也可通过其他方式修改framework名称"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#也可通过其他方式修改framework名称"}},[a._v("#")]),a._v(" 也可通过其他方式修改framework名称")])])}),[],!1,null,null,null);s.default=n.exports}}]);