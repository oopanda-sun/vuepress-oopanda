<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>正则匹配工具</title>
    <!-- 引入Bootstrap样式库 -->
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../../styles/index.styl">
</head>
<body>
<div class="container py-5">
    <div class="text-center pb-4">
        <h1 class="font-weight-bold">正则匹配工具</h1>
        <p class="lead">使用正则表达式提取信息</p>
    </div>
    <!-- 正则匹配表单 -->
    <form>
        <div class="form-group">
            <label for="form-text">待匹配信息</label>
            <textarea class="form-control rounded-0" id="form-text" rows="8" required></textarea>
        </div>
        <label for="form-text">常用正则表达式</label>
        <ul class="row-ul" >
            <li onclick="addRegex('^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$')">邮箱</li>
            <li onclick="addRegex('^1[3-9]\\d{9}$')">手机号</li>
            <li onclick="addRegex('\\b(?:\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5]).(?:\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5]).(?:\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5]).(?:\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\b')">IP4地址</li>
            <li onclick="addRegex('\\b(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}\\b|(?:[A-F0-9]{1,4}:){6}(?::[A-F0-9]{1,4}){1,2}\\b|(?:[A-F0-9]{1,4}:){5}(?::[A-F0-9]{1,4}){1,3}\\b|(?:[A-F0-9]{1,4}:){4}(?::[A-F0-9]{1,4}){1,4}\\b|(?:[A-F0-9]{1,4}:){3}(?::[A-F0-9]{1,4}){1,5}\\b|(?:[A-F0-9]{1,4}:){2}(?::[A-F0-9]{1,4}){1,6}\\b|(?:[A-F0-9]{1,4}:){1}(?::[A-F0-9]{1,4}){1,7}\\b|::1?ff:([0-9a-f]{1,4}:){4}[0-9a-f]{1,4}\\b')">IP6地址</li>
            <li onclick="addRegex('^(https?|ftp)://(-.)?([^\\s/?.#-]+.?)+(/[^\\s]*)?$')">URL</li>
            <li onclick="addRegex('^\\d{4}-\\d{2}-\\d{2}$')">日期（YYYY-MM-DD）</li>
            <li onclick="addRegex('^([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d$')">时间（HH:MM:SS)</li>
            <li onclick="addRegex('$|^\\d{17}[0-9Xx]$^\\d{15}')">身份证号</li>
        </ul>
        <div class="form-group">
            <label for="form-regex">正则表达式</label>
            <input type="text" class="form-control rounded-0" id="form-regex" placeholder="例如： [a-zA-z]+://[\S]*"
                   required>
        </div>
        <button type="submit" class="btn btn-info btn-block rounded-0 test-c" id="start-re">开始匹配</button>
    </form>
    <!-- 匹配结果显示区 -->
    <div class="card mt-4 rounded-0">
        <div class="card-header text-center text-info font-weight-bold py-2">匹配结果</div>
        <div class="card-body table-responsive push-result text-center p-3" id="result-area">结果显示区</div>
    </div>
    <!-- 工具说明 -->
    <div class="my-4">
        <h3 class="font-weight-bold">工具说明</h3>
        <ul>
            <li>按照通用的正则表达式的规则填写表单即可提取信息</li>
            <li>本工具使用JavaScript的正则语法实现</li>
        </ul>
    </div>
</div>
<!-- 引入jQuery和Bootstrap的JavaScript库 -->
<script src="https://cdn.staticfile.org/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
<!-- 自己编写的JavaScript代码 -->
<script>

    function addRegex(regex) {
        let input = document.getElementById('form-regex');
        input.value = regex;
        input.focus();
        return false
    }
    $(function () {

        $('form').on('submit', function (event) {
            // 阻止表单默认提交行为
            event.preventDefault();
            // 获取待匹配信息和正则表达式
            var form_text = $('#form-text').val().trim();
            var form_regex = $('#form-regex').val().trim();
            // 判断待匹配信息和正则表达式是否为空
            if (!form_text || !form_regex) {
                alert('待匹配信息和正则表达式不能为空');
                return;
            }
            // 开始匹配
            var result = form_text.match(new RegExp(form_regex, 'g'));
            // 判断是否匹配成功
            if (result) {
                // 显示匹配结果
                $('#result-area').html(result.join('<br>'));
            } else {
                // 提示匹配失败
                $('#result-area').html('<div class="alert alert-danger">没有匹配到相应信息</div>');
            }
        });
    });
</script>
</body>
</html>
